# RAG Document Ingestion WebUI

A React-based web interface for the RAG (Retrieval-Augmented Generation) document ingestion system built on the OndemandEnv platform.

## Overview

This WebUI provides a complete interface for:
- Document upload and validation
- Real-time pipeline tracking across all RAG services
- Authentication via Google OAuth
- Status monitoring and error handling

## Architecture

The RAG system consists of multiple microservices:
- **Document Ingestion**: Upload validation and initial processing
- **Document Processing**: Text extraction and chunking
- **Embedding Service**: Generate vector embeddings
- **Vector Storage**: Store embeddings in vector database

## Quick Start

### Prerequisites
- Node.js 18+ and npm
- Access to deployed RAG services (dev/prod environments)

### Installation
```bash
npm install
```

### Development
```bash
npm run dev
```
The development server will start on `http://localhost:5173`

### Build for Production
```bash
npm run build
```

## Configuration

### Dynamic Configuration
The WebUI automatically loads configuration from `/config.json`, which is generated by the CDK deployment process. This includes:

- AWS API endpoints
- Google OAuth client ID
- Cognito user pool details
- Service endpoints for all RAG services

### Configuration Structure
```json
{
  "aws": {
    "region": "us-east-2",
    "apiEndpoint": "https://up-api.dev.ragingest.rag-ws1.root.ondemandenv.link"
  },
  "google": {
    "clientId": "your-google-client-id"
  },
  "cognito": {
    "providerName": "cognito-idp.us-east-2.amazonaws.com/us-east-2_PoolId",
    "userPoolDomain": "your-domain.ondemandenv.link"
  },
  "services": {
    "processing": "https://proc-api.dev.ragproc.rag-ws1.root.ondemandenv.link/status",
    "embedding": "https://eb-api.dev.ragembed.rag-ws1.root.ondemandenv.link/status",
    "vectorStorage": "https://vs-api.dev.ragstore.rag-ws1.root.ondemandenv.link/status"
  }
}
```

## Core Components

### DocumentService
Main service class for document operations:
- Upload document files
- Track processing status
- Handle authentication

### DocumentTracker  
Comprehensive pipeline tracking:
- Monitor document progress across all services
- Real-time status updates
- Error handling and retry logic

### Authentication
Google OAuth integration with Cognito:
- Secure JWT token management
- Automatic token refresh
- Protected API calls

## API Documentation

See [API_ENDPOINTS.md](./docs/API_ENDPOINTS.md) for detailed endpoint documentation.

## Testing

See [TESTING_GUIDE.md](./docs/TESTING_GUIDE.md) for comprehensive testing procedures.

## Development Workflow

1. **Setup**: Install dependencies and configure environment
2. **Development**: Use `npm run dev` for hot-reload development
3. **Testing**: Run unit tests and integration tests
4. **Build**: Create production build
5. **Deploy**: CDK handles deployment and configuration generation

## Troubleshooting

### Common Issues
- **Configuration not loading**: Check `/config.json` exists and is valid
- **Authentication failures**: Verify Google OAuth configuration
- **Service endpoints unreachable**: Confirm all RAG services are deployed

### Debug Mode
Set `DEBUG=true` in environment for verbose logging.

## Contributing

1. Follow TypeScript best practices
2. Add tests for new features
3. Update documentation
4. Ensure proper error handling 